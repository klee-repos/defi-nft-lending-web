FROM node:16
ARG REACT_APP_ENVIRONMENT=production
ENV REACT_APP_ENVIRONMENT=production

ENV REACT_APP_LENDING_ADDRESS=
ENV REACT_APP_FIREBASE_API_KEY=
ENV REACT_APP_FIREBASE_AUTH_DOMAIN=
ENV REACT_APP_FIREBASE_PROJECT_ID=e
ENV REACT_APP_FIREBASE_STORAGE_BUCKET=
ENV REACT_APP_FIREBASE_MESSAGING_SENDER_ID=
ENV REACT_APP_FIREBASE_APP_ID=
ENV REACT_APP_FIREBASE_MEASUREMENT_ID=

WORKDIR /usr/src/app

COPY package*.json ./
RUN npm install

COPY . .

# Build the built version
RUN npm run build

RUN yarn global add serve

CMD ["serve","-s","build"]